{% extends "catalog/base_gen_sidebar.html" %}

{% block content %}
  <h1>{{ book.title }}</h1>
  <p><strong>Author:</strong> <a href="{% url 'catalog:author-detail' book.author.pk %}">{{ book.author }}</a></p> <!-- author detail link not yet defined -->
  <p><strong>Summary:</strong> {{ book.summary }}</p>
  <p><strong>ISBN:</strong> {{ book.isbn }}</p> 
  <p><strong>Language:</strong> {{ book.language }}</p>  
  <p><strong>Genre:</strong> {{ book.genre.all|join:", " }}</p>  

  <div class='card w-75 borderless'>
    <div class="card-header">Copies</div>
    <div class='card-body'>
      <table class="table table-striped mb-4">
        <tr>
          <th>Status</th>
          <th>Due back</th>
          <th>Imprint</th>
          <th>ID</th>
        </tr>
        {% for copy in book.bookinstance_set.all %}
        <tr>
          <td>
            <div class="{% if copy.status == 'a' %}text-success{% elif copy.status == 'm' %}text-danger{% else %}text-warning{% endif %}">
              {{ copy.get_status_display }}
            </div>      
          </td>
          <td>
            {% if copy.status != 'a' %} {{ copy.due_back }} {% endif %}          
          </td>
          <td>
            {{ copy.imprint }}
          </td>        
          <td>
            {{ copy.id }}
          </td>        
        </tr>
        {% endfor %}
      </table>  
    </div>
  </div>
{% endblock %}